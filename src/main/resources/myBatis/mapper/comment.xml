<?xml version="1.0" encoding="UTF-8"?>
<!-- mybatis map 선언 표시 -->
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
              "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="com.pknu.pass.comment.dao.CommentDao">
	
	
	
<!-- 	<select id="getComments" parameterType="HashMap" resultType="comment"> -->
<!-- 		select * -->
<!-- 		from (select commentContent,commentDate, mt20id -->
<!-- 		      from comments  -->
<!-- 		     	where mt20id=#{mt20id}  -->
<!-- 		     	order by commentNum desc ) human  -->
<!-- 		where rownum between 1 and #{commentRow} -->
<!-- 	</select> -->

	<select id="getComments" parameterType="String" resultType="comment">
	SELECT *
      from(SELECT rownum rum, project.*
     	 FROM( select *
		      from comments 
		     	where mt20id=#{mt20id} 
		     	order by commentDate desc ) project)
          where rum BETWEEN (#{commentRow})*10+1 and ((#{commentRow})+1)*10
		     	
		     
		     	
	</select>
	
	<insert id="insertComment" parameterType="comment">
		insert into comments values(comment_seq.nextVal,#{id},
									#{commentContent},TO_CHAR(SYSTIMESTAMP,'YYYY-MM-DD HH24:MI:SS'),#{mt20id})
	</insert>
	
	
	 
</mapper>